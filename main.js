!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._link=n,this._cardTemplate=document.querySelector(".card-template"),this._card=this._getTemplate(),this._handleCardClick=r},(n=[{key:"_getTemplate",value:function(){return this._cardTemplate.cloneNode(!0).content.querySelector(".card")}},{key:"_setProperties",value:function(){this._cardImage=this._card.querySelector(".card__image"),this._cardTitle=this._card.querySelector(".card__title"),this._likeButton=this._card.querySelector(".card__icon_type_like"),this._deleteButton=this._card.querySelector(".card__icon_type_delete"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name}},{key:"_handlelikeCard",value:function(){this._likeButton.classList.toggle("card__icon_type_like-active")}},{key:"_handleDeleteCard",value:function(){this._card.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handlelikeCard()})),this._deleteButton.addEventListener("click",(function(){e._handleDeleteCard()})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._link,e._name)}))}},{key:"createCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var a=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n},(t=[{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._formElement.addEventListener("reset",(function(){e._toggleButtonState()}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._config.inactiveButtonClass):this._buttonElement.classList.remove(this._config.inactiveButtonClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.classList.add(this._config.inputErrorMessageClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.inputErrorMessageClass),t.textContent=" "}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"enableValidation",value:function(){this._setEventListeners(this._formElement)}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var p=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".popup__close-button"),this._handleEscapeKey=this._handleEscapeKey.bind(this)},t=[{key:"handleClose",value:function(){this._popupElement.classList.remove("popup_open")}},{key:"_handleEscapeKey",value:function(e){"Escape"===e.key&&this.handleClose()}},{key:"handleOpen",value:function(){this._popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscapeKey)}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.handleClose()})),this._popupElement.addEventListener("click",(function(t){"popup popup_open"===t.target.className&&e.handleClose()}))}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function d(e,t,n){return t=v(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(null,arguments)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var g=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=d(this,t,[e]))._handleFormSubmit=n,r._formElement=r._popupElement.querySelector(".popup__form"),r._inputList=Array.from(r._formElement.querySelectorAll(".popup__form-input")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,r=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"handleOpen",value:function(e,n){h(v(t.prototype),"handleOpen",this).call(this),this._inputList[0].value=e||"",this._inputList[1].value=n||""}},{key:"handleClose",value:function(){h(v(t.prototype),"handleClose",this).call(this),this._formElement.reset()}},{key:"setEventListeners",value:function(){var e=this;h(v(t.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.handleClose()}))}}],r&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(p);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}function k(e,t,n){return t=C(t),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(null,arguments)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}var L=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=k(this,t,[e]))._image=n._popupElement.querySelector(".popup__image"),n._title=n._popupElement.querySelector(".popup__subtitle"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),n=t,(r=[{key:"handleOpen",value:function(e,n){j(C(t.prototype),"handleOpen",this).call(this),this._image.src=e,this._title.textContent=n}}])&&E(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(p);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function T(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}var B=function(){return e=function e(t){var n=t.nameSelector,r=t.descriptionSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._description=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{userName:this._name.textContent,userDescription:this._description.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.description;this._name.textContent=t,this._description.textContent=n}}])&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}var A=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._rendererItems=r,this._renderer=o,this._section=document.querySelector(n)},(t=[{key:"addItem",value:function(e){this._section.append(e)}},{key:"renderItems",value:function(){var e=this;this._rendererItems.forEach((function(t){e._renderer(t)}))}}])&&V(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),F=document.querySelector(".popup__form_profile"),D=document.querySelector(".popup__form-input_type_name"),M=document.querySelector(".popup__form-input_type_about"),U=document.querySelector(".profile__name"),K=document.querySelector(".profile__description"),N=document.querySelector(".profile__edit-button"),H=document.querySelector(".cards"),J=document.querySelector(".popup__form_cards"),W=document.querySelector(".profile__add-button"),z=document.querySelector(".popup__form-input_type_place"),G=document.querySelector(".popup__form-input_type_link"),Q={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",inactiveButtonClass:"popup__form-button_disabled",inputErrorClass:"popup__form-input_type_error",inputErrorMessageClass:"popup__form-error-message"};D.value=U.textContent,M.value=K.textContent;var X=new B({nameSelector:".profile__name",descriptionSelector:".profile__description"}),Y=new L("#popup-photo");Y.setEventListeners();var Z=new g("#popup-profile",(function(e){X.setUserInfo({name:e.name,description:e.about})}));Z.setEventListeners();var $=new g("#popup-cards",(function(){var e=new r(z.value,G.value,(function(e,t){return Y.handleOpen(e,t)})).createCard();H.prepend(e)}));$.setEventListeners();var ee=new A({items:[{name:"Valparaíso",link:"https://i.imgur.com/nwVAJkI.jpg",alt:"Fotografía de la playa Las Cruces, en Valparaíso"},{name:"Araucanía",link:"https://i.imgur.com/VGFVUW6.jpg",alt:"Fotografía de una araucaría, con la cordillera de fondo, en la región de la Araucanía"},{name:"Chaitén",link:"https://i.imgur.com/YsE5mUk.jpg",alt:"Fotografía de un sendero en un bosque en Chaitén, sur de Chile"},{name:"Atacama",link:"https://i.imgur.com/TxPxRfz.jpg",alt:"Fotografía del desierto de Atacama, en el norte de Chile"},{name:"Rapanui",link:"https://i.imgur.com/JaPHfQA.jpg",alt:"Fotografía de una fila de Moais en Isla de Pascua, al atardecer"},{name:"Torres del Paine",link:"https://i.imgur.com/WHIZX9k.jpg",alt:"Fotografía de un guanaco con las Torres del Paine de fondo, en la patagonia chilena"}],renderer:function(e){var t=new r(e.name,e.link,(function(){Y.handleOpen(e.link,e.name)})).createCard();ee.addItem(t)}},".cards");ee.renderItems(),N.addEventListener("click",(function(){Z.handleOpen(U.textContent,K.textContent),new a(Q,F).enableValidation()})),W.addEventListener("click",(function(){$.handleOpen(),new a(Q,J).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FDRXZCLEtBQU0sVUFDTkMsS0FBTSxrQ0FDTnNCLElBQUssbUVBRVAsQ0FDRXZCLEtBQU0sbUJBQ05DLEtBQU0sa0NBQ05zQixJQUFLLHdGQ2VMb0YsU0FBVSxTQUFDTSxHQUNULElBR00wQixFQUhRLElBQUk1SSxFQUFLa0gsRUFBS2pILEtBQU1pSCxFQUFLaEgsTUFBTSxXQUMzQzhILEVBQVdRLFdBQVd0QixFQUFLaEgsS0FBTWdILEVBQUtqSCxLQUN4QyxJQUMwQndJLGFBRTFCRSxHQUFTRSxRQUFRRCxFQUNuQixHQUVGLFVBR0ZELEdBQVNHLGNBRVR0QixFQUFrQjNGLGlCQUFpQixTQUFTLFdBQzFDcUcsRUFBYU0sV0FDWGxCLEVBQVkvRixZQUNaZ0csRUFBbUJoRyxhQUVRLElBQUlXLEVBQWNDLEVBQVFnRixHQUNsQzRCLGtCQUN2QixJQUVBcEIsRUFBZTlGLGlCQUFpQixTQUFTLFdBQ3ZDeUcsRUFBV0UsYUFDZ0IsSUFBSXRHLEVBQWNDLEVBQVF1RixHQUNsQ3FCLGtCQUNyQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IobmFtZSwgbGluaywgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkLXRlbXBsYXRlXCIpO1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbiAgfVxuXG4gIF9zZXRQcm9wZXJ0aWVzKCkge1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pY29uX3R5cGVfbGlrZVwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faWNvbl90eXBlX2RlbGV0ZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICB9XG5cbiAgX2hhbmRsZWxpa2VDYXJkKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2ljb25fdHlwZV9saWtlLWFjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlbGlrZUNhcmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fc2V0UHJvcGVydGllcygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvck1lc3NhZ2VDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yTWVzc2FnZUNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2Zvcm1FbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NhcGVLZXkgPSB0aGlzLl9oYW5kbGVFc2NhcGVLZXkuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGhhbmRsZUNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NhcGVLZXkoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUtleSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT09IFwicG9wdXAgcG9wdXBfb3BlblwiKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19mb3JtLWlucHV0XCIpXG4gICAgKTtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXRFbGVtZW50Lm5hbWVdID0gaW5wdXRFbGVtZW50LnZhbHVlXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBoYW5kbGVPcGVuKGNvbnRlbnRGaXJzdElucHV0LCBjb250ZW50U2Vjb25kSW5wdXQpIHtcbiAgICBzdXBlci5oYW5kbGVPcGVuKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0WzBdLnZhbHVlID0gY29udGVudEZpcnN0SW5wdXQgfHwgXCJcIjtcbiAgICB0aGlzLl9pbnB1dExpc3RbMV0udmFsdWUgPSBjb250ZW50U2Vjb25kSW5wdXQgfHwgXCJcIjtcbiAgfVxuXG4gIGhhbmRsZUNsb3NlKCkge1xuICAgIHN1cGVyLmhhbmRsZUNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Ipe1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1YnRpdGxlXCIpO1xuICB9XG5cbiAgaGFuZGxlT3BlbihsaW5rLCBuYW1lKXtcbiAgICBzdXBlci5oYW5kbGVPcGVuKCk7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1c2VyTmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIHVzZXJEZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZHNTZWN0aW9uU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlckl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9zZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkc1NlY3Rpb25TZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZWN0aW9uLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX3JlbmRlcmVySXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn0iLCJjb25zdCBwb3B1cFByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV9wcm9maWxlXCIpO1xuY29uc3QgaW5wdXROYW1lVXNlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0taW5wdXRfdHlwZV9uYW1lXCIpO1xuY29uc3QgaW5wdXRBYm91dFVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWlucHV0X3R5cGVfYWJvdXRcIik7XG5cbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWxwYXJhw61zb1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLmltZ3VyLmNvbS9ud1ZBSmtJLmpwZ1wiLFxuICAgIGFsdDogXCJGb3RvZ3JhZsOtYSBkZSBsYSBwbGF5YSBMYXMgQ3J1Y2VzLCBlbiBWYWxwYXJhw61zb1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBcmF1Y2Fuw61hXCIsXG4gICAgbGluazogXCJodHRwczovL2kuaW1ndXIuY29tL1ZHRlZVVzYuanBnXCIsXG4gICAgYWx0OiBcIkZvdG9ncmFmw61hIGRlIHVuYSBhcmF1Y2Fyw61hLCBjb24gbGEgY29yZGlsbGVyYSBkZSBmb25kbywgZW4gbGEgcmVnacOzbiBkZSBsYSBBcmF1Y2Fuw61hXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkNoYWl0w6luXCIsXG4gICAgbGluazogXCJodHRwczovL2kuaW1ndXIuY29tL1lzRTVtVWsuanBnXCIsXG4gICAgYWx0OiBcIkZvdG9ncmFmw61hIGRlIHVuIHNlbmRlcm8gZW4gdW4gYm9zcXVlIGVuIENoYWl0w6luLCBzdXIgZGUgQ2hpbGVcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQXRhY2FtYVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLmltZ3VyLmNvbS9UeFB4UmZ6LmpwZ1wiLFxuICAgIGFsdDogXCJGb3RvZ3JhZsOtYSBkZWwgZGVzaWVydG8gZGUgQXRhY2FtYSwgZW4gZWwgbm9ydGUgZGUgQ2hpbGVcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUmFwYW51aVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLmltZ3VyLmNvbS9KYVBIZlFBLmpwZ1wiLFxuICAgIGFsdDogXCJGb3RvZ3JhZsOtYSBkZSB1bmEgZmlsYSBkZSBNb2FpcyBlbiBJc2xhIGRlIFBhc2N1YSwgYWwgYXRhcmRlY2VyXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlRvcnJlcyBkZWwgUGFpbmVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5pbWd1ci5jb20vV0hJWlg5ay5qcGdcIixcbiAgICBhbHQ6IFwiRm90b2dyYWbDrWEgZGUgdW4gZ3VhbmFjbyBjb24gbGFzIFRvcnJlcyBkZWwgUGFpbmUgZGUgZm9uZG8sIGVuIGxhIHBhdGFnb25pYSBjaGlsZW5hXCIsXG4gIH0sXG5dO1xuY29uc3QgY2FyZHNTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc1wiKTtcblxuY29uc3QgcG9wdXBDYXJkc0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX2NhcmRzXCIpO1xuY29uc3QgYWRkQ2FyZHNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBpbnB1dEZvcm1QbGFjZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Zvcm0taW5wdXRfdHlwZV9wbGFjZVwiXG4pO1xuXG5jb25zdCBpbnB1dEZvcm1QbGFjZUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZm9ybS1pbnB1dF90eXBlX2xpbmtcIlxuKTtcblxuY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fZm9ybS1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19mb3JtLWlucHV0X3R5cGVfZXJyb3JcIixcbiAgaW5wdXRFcnJvck1lc3NhZ2VDbGFzczogXCJwb3B1cF9fZm9ybS1lcnJvci1tZXNzYWdlXCIsXG59O1xuXG5leHBvcnQge1xuICBwb3B1cFByb2ZpbGVGb3JtLFxuICBpbnB1dE5hbWVVc2VyLFxuICBpbnB1dEFib3V0VXNlcixcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGluaXRpYWxDYXJkcyxcbiAgY2FyZHNTZWN0aW9uLFxuICBwb3B1cENhcmRzRm9ybSxcbiAgYWRkQ2FyZHNCdXR0b24sXG4gIGlucHV0Rm9ybVBsYWNlVGl0bGUsXG4gIGlucHV0Rm9ybVBsYWNlTGluayxcbiAgY29uZmlnXG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBwb3B1cFByb2ZpbGVGb3JtLFxuICBpbnB1dE5hbWVVc2VyLFxuICBpbnB1dEFib3V0VXNlcixcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGluaXRpYWxDYXJkcyxcbiAgY2FyZHNTZWN0aW9uLFxuICBwb3B1cENhcmRzRm9ybSxcbiAgYWRkQ2FyZHNCdXR0b24sXG4gIGlucHV0Rm9ybVBsYWNlVGl0bGUsXG4gIGlucHV0Rm9ybVBsYWNlTGluayxcbiAgY29uZmlnLFxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy5qc1wiO1xuXG5pbnB1dE5hbWVVc2VyLnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG5pbnB1dEFib3V0VXNlci52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbn0pO1xuXG5jb25zdCBwb3B1cFBob3RvID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwLXBob3RvXCIpO1xucG9wdXBQaG90by5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1wcm9maWxlXCIsIChpbnB1dCkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWU6IGlucHV0Lm5hbWUsIGRlc2NyaXB0aW9uOiBpbnB1dC5hYm91dCB9KTtcbn0pO1xucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwQ2FyZHMgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1jYXJkc1wiLCAoKSA9PiB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcbiAgICBpbnB1dEZvcm1QbGFjZVRpdGxlLnZhbHVlLFxuICAgIGlucHV0Rm9ybVBsYWNlTGluay52YWx1ZSxcbiAgICAobGluaywgbmFtZSkgPT4gcG9wdXBQaG90by5oYW5kbGVPcGVuKGxpbmssIG5hbWUpXG4gICkuY3JlYXRlQ2FyZCgpO1xuICBjYXJkc1NlY3Rpb24ucHJlcGVuZChuZXdDYXJkKTtcbn0pO1xucG9wdXBDYXJkcy5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRzID0gbmV3IENhcmQoaXRlbS5uYW1lLCBpdGVtLmxpbmssICgpID0+IHtcbiAgICAgICAgcG9wdXBQaG90by5oYW5kbGVPcGVuKGl0ZW0ubGluaywgaXRlbS5uYW1lKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkcy5jcmVhdGVDYXJkKCk7XG5cbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzXCJcbik7XG5cbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwUHJvZmlsZS5oYW5kbGVPcGVuKFxuICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudFxuICApO1xuICBjb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcG9wdXBQcm9maWxlRm9ybSk7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuXG5hZGRDYXJkc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cENhcmRzLmhhbmRsZU9wZW4oKTtcbiAgY29uc3QgY2FyZHNGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwb3B1cENhcmRzRm9ybSk7XG4gIGNhcmRzRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuIl0sIm5hbWVzIjpbIkNhcmQiLCJuYW1lIiwibGluayIsImhhbmRsZUNhcmRDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9jYXJkIiwiX2dldFRlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsImtleSIsInZhbHVlIiwiY2xvbmVOb2RlIiwiY29udGVudCIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2xpa2VCdXR0b24iLCJfZGVsZXRlQnV0dG9uIiwic3JjIiwidGV4dENvbnRlbnQiLCJhbHQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlbGlrZUNhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9zZXRQcm9wZXJ0aWVzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJhZGQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JNZXNzYWdlQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjYXBlS2V5IiwiYmluZCIsImUiLCJoYW5kbGVDbG9zZSIsInRhcmdldCIsImNsYXNzTmFtZSIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2NhbGxTdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2luaGVyaXRzIiwiX3RoaXMyIiwiX2Zvcm1WYWx1ZXMiLCJjb250ZW50Rmlyc3RJbnB1dCIsImNvbnRlbnRTZWNvbmRJbnB1dCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYWxsIiwicmVzZXQiLCJfdGhpczMiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlIiwiX3RpdGxlIiwiVXNlckluZm8iLCJfcmVmIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsIl9kZXNjcmlwdGlvbiIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwiX3JlZjIiLCJkZXNjcmlwdGlvbiIsIlNlY3Rpb24iLCJjYXJkc1NlY3Rpb25TZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXJJdGVtcyIsIl9yZW5kZXJlciIsIl9zZWN0aW9uIiwiZWxlbWVudCIsImFwcGVuZCIsIml0ZW0iLCJwb3B1cFByb2ZpbGVGb3JtIiwiaW5wdXROYW1lVXNlciIsImlucHV0QWJvdXRVc2VyIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsImNhcmRzU2VjdGlvbiIsInBvcHVwQ2FyZHNGb3JtIiwiYWRkQ2FyZHNCdXR0b24iLCJpbnB1dEZvcm1QbGFjZVRpdGxlIiwiaW5wdXRGb3JtUGxhY2VMaW5rIiwiZm9ybVNlbGVjdG9yIiwidXNlckluZm8iLCJwb3B1cFBob3RvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cFByb2ZpbGUiLCJpbnB1dCIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJwb3B1cENhcmRzIiwibmV3Q2FyZCIsImhhbmRsZU9wZW4iLCJjcmVhdGVDYXJkIiwicHJlcGVuZCIsImNhcmRMaXN0IiwiY2FyZEVsZW1lbnQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==